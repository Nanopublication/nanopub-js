<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Nanopub Utils dev</title>
    <link rel="icon" type="image/svg+xml" href="https://vitejs.dev/logo.svg" />

    <!-- Import local for dev: -->
    <script type="module" src="./src/index.ts"></script>

    <!-- Import the latest bundled and minified: -->
    <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/@nanopub/utils/dist/index.min.js"></script> -->
    <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/@nanopub/utils@1.0.4/dist/index.min.js"></script> -->
  </head>

  <body>
    <div style="min-height: 100vh; width: 100%;">
      <h1>Check the console</h1>
    </div>
  </body>

  <script type="module">
    import {getUpdateStatus, Nanopub} from '@nanopub/utils'

    // Use await
    const status = await getUpdateStatus('http://purl.org/np/RAHtkscyyyJDLvWRuINckQrn5rbHzQKvwakNVC3fmRzGU')
    console.log("Awaited status", status)

    // Or a then callback
    getUpdateStatus('http://purl.org/np/RAHtkscyyyJDLvWRuINckQrn5rbHzQKvwakNVC3fmRzGU')
      .then(status => console.log("Then status", status))

    const np = await Nanopub.fetch('https://purl.org/np/RAHtkscyyyJDLvWRuINckQrn5rbHzQKvwakNVC3fmRzGU')
    console.log('Parsed nanopub', np.uri)
    // Browse the nanopub RDF using the RDF/JS store:
    for (const quad of np.store.match(null, null, null)) {
      console.log("One of the np subjects:", quad.subject.value.toString())
      break
    }

    // Iterate over the nanopub prefixes
    for (const [prefix, namespace] of Object.entries(np.prefixes)) {
      console.log("A prefix:", prefix, namespace)
      break
    }
  </script>
</html>
